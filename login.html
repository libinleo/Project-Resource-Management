<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src=https://code.jquery.com/jquery-3.6.0.min.js
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous">
         </script>
     <link rel="stylesheet" href="login.css">
</head>

<body>
    <h2>Hai</h2>
<div>
    <div class="sidenav">
        <div class="login-main-text">
            <h2>Project Resource Mangement<br> Login Page</h2>
            <p>Login or register from here to access.</p>
        </div>
    </div>
    <div class="main" >
        <div class="col-md-6 col-sm-12" >
            <div class="login-form">
              <section>
                    <div class="form-group">
                        <label>User Name</label>
                        <input type="text" id="username" required="" class="form-control" placeholder="User Name">
                    </div><br>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Password" required="">
                    </div><br>
                    <button type="submit"  class="btn btn-black" onclick="login()">Login </button>
                    <a href="register.html" class="btn btn-secondary" role="button">Signup</a></section>

            </div>
        </div>
    </div>
</div>

    <script>
        function login() {
            loginuser = {
                username: document.getElementById("username").value,
                password: document.getElementById("password").value
            }
            console.log(loginuser)

           
            var request = new XMLHttpRequest();
    
            request.onload = function () {
                console.log(this)
                if (this.readyState === 4 && this.status === 200) {
    
                    message = JSON.parse(this.responseText)
                    console.log(message)
                    sessionStorage.setItem("token", message.access_token);
                    console.log(message.access_token)
    
                   //  window.location.href= "welcomepage.html"
    
                }
                else if (this.status == 401) {
                    alert("Invalid Username or Password")
                }
    
            }
    
            request.open("POST", `http://127.0.0.1:5000/login`);
            request.setRequestHeader('Content-type', 'application/json; charset=UTF-8');
            console.log(JSON.stringify(loginuser))
            // Sending the request to the server
            request.send(JSON.stringify(loginuser));
            //   window.location.href= "home.html"
    
    
        }
    
    
    
    </script>

</body>


</html>


